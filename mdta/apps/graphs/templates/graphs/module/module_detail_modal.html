{% load placeholder_extras %}

<!-- Node New Modal -->
<div class="modal fade projectNodeNew" id="module-node-new-modal">
    <div class="modal-dialog">
        <form action="{% url 'graphs:module_node_new' module.id %}" method="post">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span> </button>
                    <div class="row">
                        <div class="col-xs-6">
                            <h4 class="modal-title">Node New</h4>
                        </div>
                    </div>
                </div>
                <div class="modal-body">
                    {{ node_new_form }}
                    <br>
                    <div class="row" style="margin-top: 10px;">
                        <div id="project-node-new-properties"></div>
                    </div>
                    <div class="row" style="margin-top: 10px;">
                        <div id="projectNodeNewErrMessage"></div>
                    </div>

                    {% csrf_token %}
                    <input type="hidden" name="property_data_index" value="">
                </div>
                <div class="modal-footer">
                    <input id="project_node_new" class="btn btn-primary" type="submit" value="New Node">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                </div>
            </div>
        </form>
    </div>
</div>

<!-- Edge New Modal -->
<div class="modal fade projectEdgeNew" id="module-edge-new-modal">
    <div class="modal-dialog">
        <form action="{% url 'graphs:module_edge_new' module.id %}" method="post">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span> </button>
                    <div class="row">
                        <div class="col-xs-6">
                            <h4 class="modal-title">Edge New</h4>
                        </div>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="row" style="margin-top:10px;">
                        <div class="col-xs-6">
                            <label for="project-edge-new-from-module">From Module:</label>
                            <select id="project-edge-new-from-module" name="project-edge-new-from-module" class="form-control">
                                {% for item in project_modules %}
                                    <option value="{{ item.id }}" {% if item.id == module.id %}selected{% endif %}>{{ item.name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-xs-6">
                            <label for="project-edge-new-from-node">From Node:</label>
                            <select id="project-edge-new-from-node" name="project-edge-new-from-node" class="form-control">
                                {% for item in current_module_nodes %}
                                    <option value="{{ item.id }}">{{ item.name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>

                    <div class="row" style="margin-top:10px;">
                        <div class="col-xs-6">
                            <label for="project-edge-new-to-module">To Module:</label>
                            <select id="project-edge-new-to-module" name="project-edge-new-to-module" class="form-control">
                                {% for item in project_modules %}
                                    <option value="{{ item.id }}" {% if item.id == module.id %}selected{% endif %}>{{ item.name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-xs-6">
                            <label for="project-edge-new-to-node">To Node:</label>
                            <select id="project-edge-new-to-node" name="project-edge-new-to-node" class="form-control">
                                {% for item in current_module_nodes %}
                                    <option value="{{ item.id }}">{{ item.name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>

                    <div class="row" style="margin-top: 10px;">
                        <div class="col-xs-6">
                            <label for="project-edge-new-priority">Priority:</label>
                            <select id="project-edge-new-priority" name="project-edge-new-priority" class="form-control">
                                {% for item in edge_priorities %}
                                    <option value="{{ item.0 }}">{{ item.1 }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>

                    <div class="row" style="margin-top: 10px;">
                        <div class="col-xs-6">
                            <label for="project-edge-new-type">Type:</label>
                            <select id="project-edge-new-type" name="project-edge-new-type" class="form-control">
                                {% for item in edge_types %}
                                    <option value="{{ item.id }}">{{ item.name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-xs-6">
                            <div id="project-edge-new-properties"></div>
                        </div>
                    </div>
                    <div class="row" style="margin-top: 10px;">
                        <div id="projectEdgeNewErrMessage"></div>
                    </div>

                    {% csrf_token %}
                </div>
                <div class="modal-footer">
                    <input id="project_edge_new" class="btn btn-primary" type="submit" value="New Edge">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                </div>
            </div>
        </form>
    </div>
</div>

<!-- Node&Edge New Modal -->
<div class="modal fade moduleNodeEdgeNew" id="module-node-edge-new-modal">
    <div class="modal-dialog">
        <form action="{% url 'graphs:module_node_new_node_edge' %}" method="post">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span> </button>
                    <div class="row">
                        <div class="col-xs-6">
                            <h4 class="modal-title">Node&Edge New</h4>
                        </div>
                    </div>
                </div>
                <div class="modal-body">
                    <legend>Node</legend>
                    {{ node_new_node_form }}
					<div class="row" style="margin-top: 10px;">
						<div id="module-node-edge-new-node-properties"></div>
					</div>

                    <legend>Edge</legend>

                    {{ node_new_edge_form }}
					<div class="row" style="margin-top: 10px;">
						<div id="module-node-edge-new-edge-properties"></div>
					</div>
					<div class="row" style="margin-top: 10px;">
						<div id="moduleNodeEdgeNewErrMessage"></div>
					</div>

					{% csrf_token %}
                    <input type="hidden" name="from_node_id" value="">
					<input type="hidden" name="node_property_data_index" value="">
					<input type="hidden" name="edge_property_data_index" value="">
                </div>
                <div class="modal-footer">
                     <input id="module_node_edge_new" class="btn btn-primary" type="submit" value="New Node&Edge">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                </div>
            </div>
        </form>
    </div>
</div>

<!-- Node Edit Modal -->
<div class="modal fade moduleNodeEdit" id="module-node-edit-modal">
    <div class="modal-dialog">
        <form action="{% url 'graphs:module_node_verbiage_edit' %}" method="post">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span> </button>
                    <div class="row">
                        <div class="col-xs-6">
                            <h4 class="modal-title">Node Data</h4>
                        </div>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <ul id="subnav-tabs" class="nav nav-tabs">
                            <li><a href="#general" data-toggle="tab">General</a></li>
                            <li><a href="#property" data-toggle="tab">Property</a></li>
                            <li><a href="#verbiage" data-toggle="tab">PrimaryVerbiage</a></li>
                        </ul>
                    </div>

                    <div class="tab-content">
                        <div class="tab-pane" id="general">
                            <div class="row" style="margin-top: 5px;">
                                <div class="col-xs-12">
                                    <label for="moduleNodeEditName">Name:</label>
                                    <input type="text" class="form-control" name="moduleNodeEditName" id="moduleNodeEditName" value="{{ item.name }}">
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-xs-12">
                                    <label for="moduleNodeEditType">Type:</label>
                                    <select class="form-control " id="moduleNodeEditType" name="moduleNodeEditType">
                                        {% for type in node_types %}
                                            <option value="{{ type.id }}">{{ type.name }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane" id="property">
                            <div class="row">
                                <div class="col-xs-12" >
                                    <div id="module-node-edit-properties"></div>
                                </div>
                            </div>

                        </div>
                        <div class="tab-pane" id="verbiage">
                            <div class="row">
                                <div class="col-xs-12" >
                                    <div id="module-node-edit-verbiages"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <br>
                    <div class="row" style="margin-top: 10px;">
                        <div id="moduleNodeEditErrMessage"></div>
                    </div>

                    {% csrf_token %}
                    <input type="hidden" name="moduleNodeEditId" id="moduleNodeEditId" value="">
                    <input type="hidden" name="property_data_index" value="">
                </div>
                <div class="modal-footer">
                    <input id="node_save" name="node_save" class="btn btn-primary" type="submit" value="Save">
                    {% if request.user.username == 'sliu' %}
                        <button id="node_delete" name="node_delete" class="btn btn-danger" type="submit">Delete</button>
                    {% endif %}
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                </div>
            </div>
        </form>
    </div>
</div>

<!--Node&Edge Delete Confirmation Modal -->
<div class="modal fade moduleNodeEdgeDelete" id="nodeEdgeDeleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h3 id="myModalLabel"></h3>
            </div>
            <div class="modal-body">
                <p>Warning! This Action cannot be undone.</p>
            </div>
            <div class="modal-footer">
                <form method="post" action="">
                <button class="btn btn-default" data-dismiss="modal" id="project_undelete">Abort</button>
                <a href="#" type="submit" class="btn btn-danger" id="node_edge_delete">Delete</a>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Node Detail Modal -->
<div class="modal fade moduleNodeDetail" id="module-node-detail-modal">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Node Detail</h4>
            </div>
            <div class="modal-body">
                <div class="row hidden">
                    <ul class="nav nav-tabs" >
                        {% for item in module.nodes_all %}
                            <li><a href="#node-{{ item.id }}" data-toggle="tab">{{ item.id }}</a> </li>
                        {% endfor %}
                    </ul>
                </div>

                <div class="tab-content">
                    {% for item in module.nodes_all %}
                        <div class="tab-pane" id="node-{{ item.id }}">
                            <div class="row">
                                <div class="col-xs-6"></div>
                                <div class="col-xs-6" style="position: relative; bottom: 0;">
                                    {% if draw_invisible_button %}
                                        {% if all_edges %}
                                            <a href="{% url 'graphs:project_module_detail' module.id %}" class="btn btn-default">DrawVisible</a>
                                        {% else %}
                                            <a href="{% url 'graphs:project_module_detail' module.id %}?all_edges=true" class="btn btn-default">DrawAll</a>
                                        {% endif %}
                                    {% endif %}
                                </div>
                            </div>

                            <div class="row" style="margin-bottom: 10px;">
                                <div class="col-xs-12">
                                    {% if item.module != module %}
                                        <label>Module:</label>
                                        <a href="{% url 'graphs:project_module_detail' item.module.id %}"
                                            class="btn btn-default">{{ item.module.name }}</a>
                                    {% endif %}
                                </div>
                            </div>

                            <form method="post" action="{% url 'graphs:module_node_edit' item.id %}" class="moduleNodeEditForm">
                                <div class="row">
                                    <div class="col-xs-12">
                                        <button type="submit" name="node_save" class="btn btn-primary btn-sm param-save">Save</button>
                                        <a href="#" data-toggle="modal" data-dismiss="modal"
                                           data-target="#nodeEdgeDeleteModal"
                                           data-module-id="{{ module.id }}"
                                           data-node-id="{{ item.id }}"
                                           data-node-name="{{ item.name }}"
                                           class="btn btn-danger btn-sm param-delete">Delete</a>
                                        <a href="#" data-toggle="modal"  data-dismiss="modal"
                                           data-target="#module-node-edge-new-modal"
                                           data-from-node-id="{{ item.id }}"
                                           data-module-id="{{ module.id }}"
                                           class="btn btn-primary btn-sm" >NewNode</a>
                                    </div>
                                </div>
                                <div class="row" style="margin-top: 5px;">
                                    <div class="col-xs-12">
                                        <label for="moduleNodeEditName">Name:</label>
                                        <input type="text" class="form-control" name="moduleNodeEditName" id="moduleNodeEditName" value="{{ item.name }}">
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-xs-12">
                                        <label for="moduleNodeEditType">Type:</label>
                                        <select class="form-control " id="moduleNodeEditType" name="moduleNodeEditType">
                                            {% for type in node_types %}
                                                <option value="{{ type.id }}" {% if item.type.id == type.id %}selected{% endif %}>{{ type.name }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>

                                <hr>
                                <div class="row">
                                    <div class="col-xs-12" >
                                        <div id="module-node-edit-properties">
                                            {% for key, value in item.properties_sorted %}
                                                {% if key == 'InputData' %}
                                                    <table class="table moduleNodeEditPropertyTable" id="node-property-table-{{ item.id }}">
                                                        <thead>
                                                            <tr>
                                                                <td>Inputs</td>
                                                                <td>Outputs</td>
                                                                <td><button id="buttonAddData_{{ item.id }}" type="button" class="btn btn-xs" onclick="module_node_edit_add_data({{ item.id }})">Add Data</button></td>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            {% for rec in item.properties.InputData %}
                                                                <tr id="{{ forloop.counter0 }}">
                                                                    <td><input name="Inputs_{{ forloop.counter0 }}" value="{{ rec.Inputs }}" placeholder="JSON {'key': 'value'}" ></td>
                                                                    <td><input name="Outputs_{{ forloop.counter0 }}" value="{{ rec.Outputs }}" placeholder="JSON {'key': 'value'}" > </td>
                                                                    <td class="text-center"><a href="#" onclick="deleteRow(this);"><i class="fa fa-trash-o fa-lg"></i> </a> </td>
                                                                </tr>
                                                            {% endfor %}
                                                        </tbody>
                                                    </table>
                                                {% elif key == 'OutputData' %}
                                                    {% for subkey, subvalue in item.properties.OutputData.items %}
                                                        <div class="row" style="margin-top: 5px;">
                                                            <div class="col-xs-1"></div>
                                                            <div class="col-xs-11"><label>Value: </label></div>
                                                        </div>
                                                        <div class="row" style="margin-top: 5px;">
                                                            <div class="col-xs-1"></div>
                                                            <div class="col-xs-11">
                                                                <input name="{{ subkey }}_0" style="width: 100%"
                                                                        value="{{ subvalue }}" placeholder="JSON {'key': 'value'}">
                                                            </div>
                                                        </div>
                                                    {% endfor %}
                                                {% elif key == 'Positions' %}
                                                    <input name="{{ key }}" value="" hidden>
                                                {% else %}
                                                    <div class="row" style="margin-top: 5px;">
                                                        <div class="col-xs-12">
                                                            <label>{{ key }}:</label>
                                                        </div>
                                                    </div>
                                                    <div class="row" style="margin-top: 0;">
                                                        <div class="col-xs-12">
                                                            {% if key == 'NonStandardFail' or key == 'TextToSpeech' %}
                                                                <input name="{{ key }}" type="checkbox"
                                                                       {% if value == 'on' %} checked {% endif %}
                                                                       data-toggle="toggle" data-width="100"
                                                                       data-on="True" data-onstyle="success"
                                                                       data-off="False" data-offstyle="default">
                                                            {% elif 'Verbiage' in key or 'No' in key %}
                                                                <textarea name="{{ key }}" rows="3" style="width:100%" placeholder="{% placeholder_format key item.name %}">{{ value }}</textarea>
                                                            {% else %}
                                                                <input name="{{ key }}" style="width:100%" value="{{ value }}" placeholder="{% placeholder_format key item.name %}">
                                                            {% endif %}
                                                        </div>
                                                    </div>
                                                {% endif %}
                                            {% endfor %}
                                        </div>
                                    </div>
                                </div>
                                <br>
                                <div class="row">
                                    <div class="col-xs-11">
                                        <div id="moduleNodeEditErrMessage">&nbsp;</div>
                                    </div>
                                    <div class="cos-xs-1">
                                        <input type="hidden" name="moduleNodeEditId" value="{{ item.id }}">
                                        <input type="hidden" name="property_data_index" value="">
                                    </div>
                                </div>
                                <br>
                                {% csrf_token %}
                            </form>

                            <div class="row" style="margin-top: 10px;">
                                <div class="col-xs-12">
                                    {% with leaving_edges=item.leaving_edges %}
                                        {% if leaving_edges %}
                                            <h5>Leaving Edges:</h5>
                                            <table class="table table-hover table-bordered">
                                                <thead>
                                                    <tr>
                                                        <th class="col-xs-2">ToNode</th>
                                                        <th class="col-xs-2">Priority</th>
                                                        <th class="col-xs-2">Properties</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    {% for edge in leaving_edges %}
                                                        <tr>
                                                            <td>{{ edge.to_node.name }}</td>
                                                            <td>{{ edge.priority }}</td>
                                                            <td>
                                                                {% if edge.type.name in 'Data, PreCondition' %}
                                                                    {% if edge.type.subkeys_data_name == 'Outputs' %}
                                                                        {{ edge.properties.OutputData.Outputs }}
                                                                    {% else %}
                                                                        {{ edge.properties.OutputData.Condition }}
                                                                    {% endif %}
                                                                {% else %}
                                                                    {{ edge.properties }}
                                                                {% endif %}
                                                            </td>
                                                        </tr>
                                                    {% endfor %}
                                                </tbody>
                                            </table>
                                        {% endif %}
                                    {% endwith %}
                                </div>
                            </div>

                            <div class="row" style="margin-top: 10px;">
                                <div class="col-xs-12">
                                    {% if item.arriving_edges %}
                                        <h5>Arriving Edges:</h5>
                                        <table class="table table-hover table-bordered">
                                            <thead>
                                                <tr>
                                                    <th class="col-xs-2">FromNode</th>
                                                    <th class="col-xs-2">Priority</th>
                                                    <th class="col-xs-2">Properties</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for edge in item.arriving_edges %}
                                                    <tr>
                                                        <td>{{ edge.from_node.name }}</td>
                                                        <td>{{ edge.priority }}</td>
                                                        <td>
                                                            {% if edge.type.name in 'Data, PreCondition' %}
                                                                {% if edge.type.subkeys_data_name == 'Outputs' %}
                                                                    {{ edge.properties.OutputData.Outputs }}
                                                                {% else %}
                                                                    {{ edge.properties.OutputData.Condition }}
                                                                {% endif %}
                                                            {% else %}
                                                                {{ edge.properties }}
                                                            {% endif %}
                                                        </td>
                                                    </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                    {% endif %}
                                </div>
                            </div>

                        </div>
                    {% endfor %}
                </div>

            </div>
        </div>
    </div>
</div>

<!-- Edge Detail Modal -->
<div class="modal fade moduleEdgeDetail" id="module-edge-detail-modal">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Edge Detail</h4>
            </div>
            <div class="modal-body">
                <div class="row hidden">
                    <ul class="nav nav-tabs">
                        {% for item in module.edges_all %}
                            <li><a href="#edge-{{ item.id }}" data-toggle="tab">{{ item.id }}</a> </li>
                        {% endfor %}
                    </ul>
                </div>

                <div class="tab-content">
                    {% for item in module.edges_all %}
                        <div class="tab-pane" id="edge-{{ item.id }}">
                            <div class="row" style="margin-bottom: 10px;">
                                <div class="col-xs-6"></div>
                                <div class="col-xs-6" style="position: relative; bottom: 0;">
                                    {% if draw_invisible_button %}
                                        {% if all_edges %}
                                            <a href="{% url 'graphs:project_module_detail' module.id %}" class="btn btn-default">DrawVisible</a>
                                        {% else %}
                                            <a href="{% url 'graphs:project_module_detail' module.id %}?all_edges=true" class="btn btn-default">DrawAll</a>
                                        {% endif %}
                                    {% endif %}
                                </div>
                            </div>
                            <form method="post" action="{% url 'graphs:module_edge_edit' item.id %}" class="moduleEdgeEditForm">
                                <div class="row">
                                    <div class="col-xs-12">
                                        <button type="submit" name="edge_save" class="btn btn-primary btn-sm param-save">Save</button>
                                        <a href="#" data-toggle="modal" data-dismiss="modal"
                                           data-target="#nodeEdgeDeleteModal"
                                           data-module-id="{{ module.id }}"
                                           data-edge-id="{{ item.id }}"
                                           data-edge-name="{{ item.from_node.name }} - {{ item.to_node.name }}"
                                           class="btn btn-danger btn-sm param-delete">Delete</a>
                                        <button type="reset" class="btn btn-default btn-sm">Reset</button>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xs-12">
                                        <label for="moduleEdgeEditFromNode">FromNode:</label>
                                        <select class="form-control" id="moduleEdgeEditFromNode" name="moduleEdgeEditFromNode">
                                            {% for node in module_nodes_set %}
                                                <option value="{{ node.id }}" {% if item.from_node.id == node.id %}selected{% endif %}>{{ node.module.name }}:{{ node.name }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xs-12">
                                        <label for="moduleEdgeEditToNode">ToNode:</label>
                                        <select class="form-control" id="moduleEdgeEditToNode" name="moduleEdgeEditToNode">
                                            {% for node in module_nodes_set %}
                                                <option value="{{ node.id }}" {% if item.to_node.id == node.id %}selected{% endif %}>{{ node.module.name }}:{{ node.name }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xs-12">
                                        <label for="moduleEdgeEditPriority">Priority:</label>
                                        <select class="form-control" id="moduleEdgeEditPriority" name="moduleEdgeEditPriority">
                                            {% for priority in edge_priorities %}
                                                <option value="{{ priority.0 }}" {% if item.priority == priority.0 %}selected{% endif %}>{{ priority.1 }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-xs-12">
                                        <label for="moduleEdgeEditType">Type:</label>
                                        <select class="form-control " id="moduleEdgeEditType" name="moduleEdgeEditType">
                                            {% for type in edge_types %}
                                                <option value="{{ type.id }}" {% if item.type.id == type.id %}selected{% endif %}>{{ type.name }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>

                                <hr>
                                <div class="row">
                                    <div class="col-xs-12" >
                                        <div id="module-edge-edit-properties">
                                            {% for key, value in item.properties_sorted %}
                                                {% if key == 'OutputData' %}
                                                    {% for subkey, subvalue in item.properties.OutputData.items %}
                                                        <div class="row" style="margin-top: 5px;">
                                                            <div class="col-xs-1"></div>
                                                            <div class="col-xs-11">
                                                                {% if subkey == 'Outputs' %}
                                                                    <label>Follow If...</label>
                                                                {% else %}
                                                                    <label>{{ subkey }}:</label>
                                                                {% endif %}
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-xs-1"></div>
                                                            <div class="col-xs-11">
                                                                <input name="{{ subkey }}_0" style="width:100%"
                                                                       {% if subkey == 'Outputs' %} class="data_edge_keys" {% endif %}
                                                                       value="{{ subvalue }}" placeholder="JSON {'key': 'value'}" >
                                                            </div>
                                                        </div>
                                                    {% endfor %}
                                                {% else %}
                                                    <div class="row" style="margin-top: 5px;">
                                                        <div class="col-xs-12">
                                                            <label>{{ key }}:</label>
                                                        </div>
                                                    </div>
                                                    <div class="row" style="margin-top: 5px;">
                                                        <div class="col-xs-12">
                                                            {% if key in 'Invisible, NoneConfirm' %}
                                                                <input name="{{ key }}" type="checkbox"
                                                                       {% if value == 'on' %} checked {% endif %}
                                                                       data-toggle="toggle" data-width="100"
                                                                       data-on="True" data-onstyle="success"
                                                                       data-off="False" data-offstyle="default">
                                                            {% else %}
                                                                <input name="{{ key }}" style="width: 100%" value="{{ value }}" >
                                                            {% endif %}
                                                        </div>
                                                    </div>
                                                {% endif %}
                                            {% endfor %}
                                        </div>
                                    </div>
                                </div>
                                <br>
                                <div class="row">
                                    <div class="col-xs-11">
                                        <div id="moduleEdgeEditErrMessage">&nbsp;</div>
                                    </div>
                                    <div class="col-xs-1">
                                        <input type="hidden" name="moduleEdgeEditModuleId" value="{{ module.id }}">
                                    </div>
                                </div>
                                <br>
                                {% csrf_token %}
                            </form>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>